import React, { useState } from "react";
export default function SearchPage(){ const [q,setQ]=useState(''); const [results,setResults]=useState([]); const [loading,setLoading]=useState(false);
  async function doSearch(e){ e&&e.preventDefault(); if(!q.trim()) return; setLoading(true); try{ const res=await fetch('/api/search?q='+encodeURIComponent(q)); const j=await res.json(); setResults(j.results||j||[]); }catch(err){console.error(err); setResults([]);} setLoading(false); }
  return (<div className="max-w-5xl mx-auto px-4 py-12"><form onSubmit={doSearch} className="flex flex-col items-center gap-6"><div className="w-full"><input value={q} onChange={e=>setQ(e.target.value)} placeholder="Search the world's knowledge — try ‘motherboard’" className="w-full rounded-full px-6 py-4 text-lg shadow-md border border-slate-100 focus:outline-none focus:ring-2 focus:ring-cyan-400" /></div><div className="flex gap-3"><button onClick={doSearch} className="bg-cyan-500 text-white px-5 py-2 rounded-md shadow">Search</button><button type="button" onClick={()=>{setQ(''); setResults([])}} className="px-5 py-2 rounded-md border">Clear</button></div></form><div className="mt-8">{loading && <div className="text-slate-600">Loading...</div>}{!loading && results.length===0 && <div className="text-slate-500">No results yet. Try searching for something.</div>}<div className="grid gap-4 mt-4">{results.map((r,idx)=>(<a key={idx} href={r.link||'#'} target="_blank" rel="noreferrer" className="block bg-white p-4 rounded-lg shadow hover:shadow-md transition"><div className="flex items-start gap-4">{r.thumbnail && <img src={r.thumbnail} alt="" className="w-28 h-20 object-cover rounded" />}<div><h3 className="text-slate-900 font-medium text-lg">{r.title}</h3><p className="text-slate-600 text-sm mt-1">{r.snippet}</p><div className="text-xs text-slate-400 mt-2">{r.link}</div></div></div></a>))}</div></div></div>); }

