import React,{useState} from 'react';
export default function SearchPage(){ const [q,setQ]=useState(''); const [results,setResults]=useState([]); const [loading,setLoading]=useState(false);
  async function doSearch(e){e&&e.preventDefault();if(!q.trim())return;setLoading(true);try{const res=await fetch('/api/search?q='+encodeURIComponent(q));const j=await res.json();setResults(j.results||[]);}catch(err){console.error(err);setResults([]);}setLoading(false);}
  return <div className='max-w-4xl mx-auto p-6'><form onSubmit={doSearch} className='flex flex-col gap-4 items-center'><input value={q} onChange={e=>setQ(e.target.value)} className='w-full rounded-full px-4 py-3 border shadow' placeholder='Search anything...'/><div className='flex gap-3'><button className='bg-cyan-600 text-white px-4 py-2 rounded'>Search</button><button type='button' onClick={()=>{setQ('');setResults([])}} className='border px-4 py-2 rounded'>Clear</button></div></form><div className='mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4'>{loading&&<p>Loading...</p>}{!loading&&results.map(r=><a key={r.id} href={r.link} target='_blank' className='border rounded-xl p-4 shadow-sm hover:shadow-md bg-white flex flex-col'><h2 className='font-semibold text-lg text-cyan-700 mb-2'>{r.title}</h2>{r.thumbnail&&<img src={r.thumbnail} alt='' className='w-full h-40 object-cover rounded mb-2'/>}<p className='text-sm text-slate-600'>{r.snippet}</p></a>)}</div></div>; }

